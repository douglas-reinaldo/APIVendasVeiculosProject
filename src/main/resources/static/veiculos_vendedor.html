<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veículos do Vendedor - Sistema de Gestão</title>
    <meta name="description" content="Gerencie os veículos de um vendedor específico" />

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Tema CSS -->
    <link rel="stylesheet" href="styles/theme.css">
</head>
<body>
<!-- Header -->
<header>
    <div style="max-width: 1280px; margin: 0 auto; padding: 1.5rem;">
        <div style="display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;">
            <div style="display: flex; align-items: center; gap: 0.75rem;">
                <div class="gradient-primary" style="width: 3rem; height: 3rem; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 40px -10px hsl(199 89% 48% / 0.15);">
                    <i data-lucide="car" style="width: 1.5rem; height: 1.5rem; color: white;"></i>
                </div>
                <div>
                    <h1 style="font-size: 1.875rem; font-weight: 700; margin: 0;">
                        Veículos de <span id="vendedorNome" class="gradient-text">...</span>
                    </h1>
                    <p style="color: hsl(var(--color-muted-foreground)); font-size: 0.875rem; margin: 0;">
                        Gerencie o estoque de veículos
                    </p>
                </div>
            </div>

            <div style="display: flex; gap: 0.75rem;">
                <button class="btn btn-outline" onclick="window.location.href='vendedores.html'">
                    <i data-lucide="arrow-left" style="width: 1rem; height: 1rem;"></i>
                    Voltar
                </button>
                <button class="btn btn-primary" onclick="openModal()">
                    <i data-lucide="plus" style="width: 1rem; height: 1rem;"></i>
                    Novo Veículo
                </button>
            </div>
        </div>
    </div>
</header>

<!-- Main Content -->
<main style="max-width: 1280px; margin: 0 auto; padding: 2rem;">
    <!-- Loading State -->
    <div id="loading" style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 5rem 1rem;">
        <div class="spinner"></div>
        <p style="margin-top: 1rem; color: hsl(var(--color-muted-foreground));">Carregando veículos...</p>
    </div>

    <!-- Empty State -->
    <div id="emptyState" style="display: none;">
        <div class="empty-state animate-slide-up">
            <div class="empty-icon">
                <i data-lucide="info" style="width: 2.5rem; height: 2.5rem;"></i>
            </div>
            <h3 style="font-size: 1.25rem; margin-bottom: 0.5rem;">Nenhum veículo cadastrado</h3>
            <p style="color: hsl(var(--color-muted-foreground)); margin-bottom: 1.5rem;">
                Este vendedor não possui veículos cadastrados
            </p>
            <button class="btn btn-primary" onclick="openModal()">
                <i data-lucide="plus" style="width: 1rem; height: 1rem;"></i>
                Cadastrar Veículo
            </button>
        </div>
    </div>

    <!-- Error State -->
    <div id="errorState" style="display: none;">
        <div class="alert alert-danger">
            <i data-lucide="x-circle" style="width: 1.25rem; height: 1.25rem;"></i>
            <span>Erro ao carregar veículos. Verifique se a API está rodando em <strong>localhost:8080</strong>.</span>
        </div>
    </div>

    <!-- Veículos Grid -->
    <div id="veiculosContainer" class="grid"></div>
</main>

<!-- Modal -->
<div id="modal" class="modal">
    <div class="modal-content">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem;">
            <div>
                <h2 id="modalTitle" style="font-size: 1.5rem; margin-bottom: 0.25rem;">Cadastrar Novo Veículo</h2>
                <p id="modalDescription" style="color: hsl(var(--color-muted-foreground)); font-size: 0.875rem; margin: 0;">
                    Preencha os dados do veículo.
                </p>
            </div>
            <button class="btn-icon" onclick="closeModal()">
                <i data-lucide="x" style="width: 1.25rem; height: 1.25rem;"></i>
            </button>
        </div>

        <form id="formVeiculo" onsubmit="handleSubmit(event)">
            <input type="hidden" id="veiculoId">

            <div style="margin-bottom: 1rem;">
                <label for="marca" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Marca *</label>
                <input type="text" id="marca" class="input" placeholder="Ex: Toyota, Honda, Ford" required>
            </div>

            <div style="margin-bottom: 1rem;">
                <label for="modelo" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Modelo *</label>
                <input type="text" id="modelo" class="input" placeholder="Ex: Corolla, Civic" required>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                <div>
                    <label for="ano" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Ano *</label>
                    <input type="number" id="ano" class="input" placeholder="2024" min="1900" max="2099" required>
                </div>
                <div>
                    <label for="preco" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Preço (R$) *</label>
                    <input type="number" id="preco" class="input" placeholder="50000.00" step="0.01" required>
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <label for="placa" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Placa *</label>
                <input type="text" id="placa" class="input" placeholder="ABC-1234" required>
            </div>

            <div id="vendedorIdContainer" style="margin-bottom: 1.5rem; display: none;">
                <label for="vendedorIdInput" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                    ID do Vendedor Associado *
                </label>
                <input type="number" id="vendedorIdInput" class="input" placeholder="ID do novo vendedor (Ex: 5)">
                <p style="font-size: 0.75rem; color: hsl(var(--color-muted-foreground)); margin-top: 0.25rem;">
                    Use este campo para <strong>transferir</strong> o veículo para outro vendedor.
                </p>
            </div>

            <div id="feedback" style="margin-bottom: 1rem;"></div>

            <div style="display: flex; gap: 0.75rem;">
                <button type="button" class="btn btn-outline" onclick="closeModal()" style="flex: 1;">
                    Cancelar
                </button>
                <button type="submit" class="btn btn-primary" id="submitBtn" style="flex: 1;">
                    <span id="submitText">Cadastrar</span>
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Utilitários e Lógica -->
<script src="scripts/utils.js"></script>
<script src="scripts/veiculos_vendedor.js"></script>
</body>
</html>
